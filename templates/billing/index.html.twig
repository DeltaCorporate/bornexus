{% extends 'layouts/dashboard.html.twig' %}

{% block title %}Billing index{% endblock %}

{% block body %}
    <h1>Billing index</h1>
    <twig:Billing:BillingCard
        title="Billing card"
        description="Billing card description"
        routeIcon="app_billing_new"
    >

    <table class="w-full">
        <thead>
            <th>#</th>
            <th>Numéro</th>
            <th>Date d'émission</th>
            <th>Client</th>
            
            <th>Total TTC</th>
            <th>Status</th>
            <th></th>
        </thead>
        <tbody>
        {% for billing in billings %}
            <tr>
                <td class="text-center"><input type="checkbox"/></td>
                <td class="text-center">{{ billing.typeFirstLetter }}{{ billing.id }}</td>
                <td class="text-center">{{ billing.emitedAt|format_datetime('short', 'none', locale='fr')}}</td>
                <td class="text-center"><a href="#" class="text-accent" target="_blank"> {{ billing.users.fullName }}</a></td>
                <td class="text-center">{{ billing.priceTtcDiscounted }}€ </td>
                <td class="text-center">
                     {% if billing.status == 'paid' %}
                            {% set badgeColor = 'success' %}
                          {% elseif billing.status == 'pending' %}
                            {% set badgeColor = 'warning' %}
                          {% elseif billing.status == 'unpaid' %}
                            {% set badgeColor = 'error' %}
                     {% endif %}

                    <twig:Badge
                        text="{{ billing.statusLabel }}"
                        size="sm"
                        color="{{ badgeColor }}"
                        fontSize="sm"
                        radius="rounded-xl"
                        textColor="text-base"
                    />
                </td>
                <td class="text-center">
                    <div class="flex py-1 gap-2 ">
                        <twig:Button 
                            icon="fa fa-eye"
                            radius="rounded-full"
                            fontSize="sm"
                            size="sm"
                            balise="a"
                            href=""
                            route="app_billing_show"
                        />
                        <twig:Button 
                            icon="fa fa-pen"
                            color="secondary"
                            radius="rounded-full"
                            fontSize="sm"
                            size="sm"
                            balise="a"
                            href=""
                            route="app_billing_show"
                        />
                    </div>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    </twig:Billing:BillingCard>

    <a href="{{ path('commercial_company_app_billing_new') }}">Create new</a>
{% endblock %}
